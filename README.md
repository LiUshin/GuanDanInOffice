# 局域网掼蛋 (LAN GuanDan)

一个基于 Node.js, React 和 Socket.IO 开发的局域网联机掼蛋游戏。支持单文件打包运行，开箱即用。

## ✨ 特色功能 (Features)

### 🎮 核心体验
*   **局域网联机**：无需外网，同一个 Wi-Fi 下即可畅玩。
*   **智能 AI 托管**：人数不足时，智能 Bot 自动补位；支持中途断线重连。
*   **完整规则实现**：
    *   支持 **进贡/还贡**（包括双扣双贡、单扣单贡）。
    *   支持 **抗贡**（双大王在手免贡）。
    *   支持 **接风**（进贡最大者下轮先手）。
    *   支持 **升级**（从 2 打到 A，双扣升3级，单扣升2级，保级升1级）。
    *   支持 **同花顺**（且规则设定为同花顺 > 所有普通炸弹）。

### 🖥️ 界面与交互
*   **摸鱼模式 (Stealth Mode)**：
    *   按 **`i`** 键一键切换至 **伪装 VS Code 界面**，完美融入办公环境。
    *   游戏背景采用深色 IDE 风格，低调不刺眼。
*   **智能理牌 (Smart Sort)**：
    *   提供 **“同花顺视图”**（2D Stack View）：将同点数牌纵向堆叠，横向按花色严格对齐，**同花顺高亮显示**，一目了然。
    *   支持一键切换回普通视图（按点数排序）。
*   **出牌提示**：AI 辅助计算最优牌型，新手也能轻松上手。
*   **自由选座**：游戏开始前点击空座位即可换座。
*   **房间聊天**：内置实时聊天框，方便队友交流。

## 🚀 快速开始 (Quick Start)

### 直接运行 (推荐)
1.  下载最新的 `guandan-game.exe`。
2.  双击运行。
3.  游戏会自动启动服务器（默认端口 3000）。
4.  **房主**：在浏览器打开 `http://localhost:3000` 或本机 IP 地址。
5.  **其他玩家**：在浏览器输入房主的局域网 IP 地址（如 `http://192.168.1.5:3000`）加入游戏。

### 开发运行 (Development)
```bash
# 安装依赖
npm install

# 启动开发服务器 (同时启动前端和后端)
npm run dev

# 打包为可执行文件
npm run package
```

## 📖 游戏规则 (Rules)

*   **牌型大小**：四大天王 > 同花顺 > 6+张炸弹 > 5张炸弹 > 4张炸弹 > 其他牌型。
*   **级牌 (Level Card)**：当前打的等级牌（如打2时的红桃2）为**百搭牌 (Wild Card)**，可代替除大小王外的任意牌。
*   **双扣**：同队两人分别获得第1、2名。下局升3级，对方进贡两张。
*   **单扣**：同队分别获得第1、3名。下局升2级，末游向头游进贡一张。
*   **保级**：同队分别获得第1、4名。下局升1级，末游向头游进贡一张。

## 🛠️ 技术栈 (Tech Stack)
*   **Frontend**: React, Tailwind CSS (v3), Vite
*   **Backend**: Node.js, Express, Socket.IO
*   **Language**: TypeScript
*   **Packaging**: pkg

## 📝 更新日志
*   **v1.2**: 新增“摸鱼模式” (Boss Key)，优化同花顺视图（紧凑无缝布局）。
*   **v1.1**: 修复 Bot 炸弹逻辑，调整同花顺权重，增加断线重连功能。
*   **v1.0**: 基础功能上线。

---
*Enjoy your game!*
